题目：实现一个分布式限流
你有n个爬虫机器用来下载整个互联网。给定一个URL后根据哈希值对n的求余，分配到对应的机器上。
下载网页需要消费一定的带宽。
实现一个满足一定条件的爬虫：在给定的时间内不能请求超过b字节。
*提示：使用一个服务器专门用来协调爬虫*
答：这个问题，正如正面描述的一样，是模糊的。
- 由于我们通常在一个请求中下载一个文件，如果这个文件大于b字节，我们是没有办法限制每分钟不超过b字节的服务，除非我们在网络上，比如传输层或者网络层。
有时系统设计师会关注分布式文件的大小，可以推断：这个问题很频繁，但是我们不在关心。
相对来说，我们可以选择不下载文件中超过b字节的部分。
- 给定主机的带宽是我们可以关注的一个冲突。一个重要的设计选择是怎样解决这个冲突。
我们可以使用谁先来先服务谁的策略，或是有优先级服务？
一般爬虫的人会有一个内置的优先级的概念，基于对用户的重要性或者对当前拷贝的最新性。
一个实现的方法是使用一个认证服务器，这样爬虫每次回去检查是否能去爬这个主机。
服务器可以保存着从这个主机上在过去一分钟内已经下载了多少字节，以及如果我们已经快接近配额了，可以决定是否允许其他爬虫再去爬这个主机。
如果我们不关心优先级，我们可以保持接口同步，这样可以立即获取鉴权结果。
如果我们关系优先级，服务器可以把请求排队，然后通知爬虫哪个文件可以下载了。这个鉴权服务器上的队列是基于优先级的。
如果鉴权服务器称为了性能瓶颈，可以使用多个鉴权服务器，这样给定的主机可以使用哈希来得到主机名，从而分配到对应的服务器上。